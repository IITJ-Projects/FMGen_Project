<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zevo AI - Conversational Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                50: "#eff6ff",
                100: "#dbeafe",
                500: "#3b82f6",
                600: "#2563eb",
                700: "#1d4ed8",
              },
              gray: {
                50: "#f9fafb",
                100: "#f3f4f6",
                200: "#e5e7eb",
                300: "#d1d5db",
                400: "#9ca3af",
                500: "#6b7280",
                600: "#4b5563",
                700: "#374151",
                800: "#1f2937",
                900: "#111827",
              },
            },
          },
        },
      };
    </script>
    <style>
      .voice-active {
        color: #10b981 !important;
        animation: pulse 1s infinite;
      }
      .voice-inactive {
        color: #6b7280 !important;
      }
      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
    </style>
  </head>
  <body class="bg-gray-50 h-screen overflow-hidden">
    <!-- Markdown rendering libraries -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.7/dist/purify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.2/marked.min.js"></script>
    <!-- Main Chat Container -->
    <div class="flex flex-col h-screen max-w-4xl mx-auto bg-white shadow-lg">
      <!-- Header -->
      <div
        class="flex items-center justify-between p-4 border-b border-gray-200 bg-white"
      >
        <div class="flex items-center space-x-3">
          <div
            class="w-10 h-10 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full flex items-center justify-center"
          >
            <i class="fas fa-robot text-white text-lg"></i>
          </div>
          <div>
            <h1 class="text-xl font-semibold text-gray-900">Zevo AI</h1>
            <p class="text-sm text-gray-500" id="connectionStatus">
              Connecting...
            </p>
            <p class="text-xs text-gray-400" id="voice-indicator">ðŸŽ¤ Ready</p>
          </div>
        </div>

        <!-- Mode Toggle -->
        <div class="flex items-center space-x-4">
          <div class="flex items-center space-x-2">
            <span class="text-sm text-gray-600">Text</span>
            <!-- <button
              id="modeToggle"
              class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"
            >
              <span
                id="modeToggleThumb"
                class="inline-block h-4 w-4 transform rounded-full bg-white shadow-lg transition-transform translate-x-1"
              ></span>
            </button>
            <span class="text-sm text-gray-600">Voice</span> -->
          </div>

          <div class="flex items-center space-x-2">
            <button
              id="clearChatBtn"
              class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"
              title="Clear Chat"
            >
              <i class="fas fa-trash text-sm"></i>
            </button>
            <button
              id="settingsBtn"
              class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"
              title="Settings"
            >
              <i class="fas fa-cog text-sm"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Chat Messages Area -->
      <div class="flex-1 overflow-y-auto p-4 space-y-4" id="chatMessages">
        <!-- Welcome Message -->
        <div class="flex items-start space-x-3">
          <div
            class="w-8 h-8 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full flex items-center justify-center flex-shrink-0"
          >
            <i class="fas fa-robot text-white text-sm"></i>
          </div>
          <div class="flex-1">
            <div
              class="bg-gray-100 rounded-2xl rounded-tl-md px-4 py-3 max-w-3xl"
            >
              <p class="text-gray-800 leading-relaxed">
                Hello! I'm Zevo AI, your conversational assistant. I can help
                you with questions, have conversations, and assist with various
                tasks. You can type your message or use voice input. How can I
                help you today?
              </p>
            </div>
            <p class="text-xs text-gray-500 mt-1 ml-4">Just now</p>
          </div>
        </div>
      </div>

      <!-- Typing Indicator -->
      <div class="px-4 pb-2" id="typingIndicator" style="display: none">
        <div class="flex items-start space-x-3">
          <div
            class="w-8 h-8 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full flex items-center justify-center flex-shrink-0"
          >
            <i class="fas fa-robot text-white text-sm"></i>
          </div>
          <div class="bg-gray-100 rounded-2xl rounded-tl-md px-4 py-3">
            <div class="flex space-x-1">
              <div
                class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"
              ></div>
              <div
                class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"
                style="animation-delay: 0.1s"
              ></div>
              <div
                class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"
                style="animation-delay: 0.2s"
              ></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Text Mode Input Area -->
      <div id="textInputArea" class="border-t border-gray-200 p-4 bg-white">
        <div class="flex items-end space-x-3">
          <!-- Voice Button -->
          <button
            id="voiceBtn"
            class="w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors flex-shrink-0"
            title="Voice Input"
          >
            <i class="fas fa-microphone text-sm"></i>
          </button>

          <!-- Input Container -->
          <div class="flex-1 relative">
            <textarea
              id="messageInput"
              placeholder="Type a message..."
              rows="1"
              maxlength="2000"
              class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
              style="min-height: 48px; max-height: 120px"
            ></textarea>
            <button
              id="sendBtn"
              class="absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-primary-500 hover:bg-primary-600 text-white rounded-full flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              title="Send Message"
            >
              <i class="fas fa-paper-plane text-xs"></i>
            </button>
          </div>
        </div>

        <!-- Input Footer -->
        <div class="flex items-center justify-between mt-2 px-2">
          <div class="flex items-center space-x-4">
            <!-- Voice Status -->
            <div
              id="voiceStatus"
              class="flex items-center space-x-2 text-red-500 text-sm"
              style="display: none"
            >
              <i class="fas fa-microphone animate-pulse"></i>
              <span>Listening...</span>
            </div>
          </div>
          <div class="text-xs text-gray-400">
            <span id="charCount">0</span>/2000
          </div>
        </div>
      </div>

      <!-- Voice Mode Input Area -->
      <div
        id="voiceInputArea"
        class="border-t border-gray-200 p-8 bg-white"
        style="display: none"
      >
        <!-- Start Call Interface -->
        <div
          id="startCallInterface"
          class="flex flex-col items-center space-y-6"
        >
          <!-- Large Voice Button -->
          <button
            id="voiceModeBtn"
            class="w-32 h-32 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-full flex items-center justify-center transition-all transform hover:scale-105 shadow-lg"
            title="Start Voice Call"
          >
            <i class="fas fa-microphone text-4xl"></i>
          </button>

          <!-- Voice Status -->
          <div class="text-center">
            <div
              id="voiceModeStatus"
              class="text-lg font-medium text-gray-700 mb-2"
            >
              Tap to start voice call
            </div>
            <div id="voiceModeSubStatus" class="text-sm text-gray-500">
              Continuous conversation like a phone call
            </div>
          </div>
        </div>

        <!-- Active Call Interface -->
        <div
          id="activeCallInterface"
          class="flex flex-col items-center space-y-6"
          style="display: none"
        >
          <!-- Call Status -->
          <div class="text-center">
            <div class="flex items-center justify-center space-x-2 mb-4">
              <div
                id="callStatusIndicator"
                class="w-3 h-3 bg-green-500 rounded-full animate-pulse"
              ></div>
              <span
                id="callStatusText"
                class="text-lg font-medium text-gray-700"
                >Connected</span
              >
            </div>
            <div id="callDuration" class="text-sm text-gray-500">00:00</div>
          </div>

          <!-- Call Controls -->
          <div class="flex items-center space-x-6">
            <!-- Mute/Unmute Button -->
            <button
              id="callMuteBtn"
              class="w-16 h-16 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-full flex items-center justify-center transition-all"
              title="Mute/Unmute"
            >
              <i class="fas fa-microphone text-xl"></i>
            </button>

            <!-- Hold Button -->
            <button
              id="callHoldBtn"
              class="w-16 h-16 bg-yellow-100 hover:bg-yellow-200 text-yellow-600 rounded-full flex items-center justify-center transition-all"
              title="Hold"
            >
              <i class="fas fa-pause text-xl"></i>
            </button>

            <!-- End Call Button -->
            <button
              id="endCallBtn"
              class="w-16 h-16 bg-red-100 hover:bg-red-200 text-red-600 rounded-full flex items-center justify-center transition-all"
              title="End Call"
            >
              <i class="fas fa-phone-slash text-xl"></i>
            </button>
          </div>

          <!-- Call Info -->
          <div class="text-center">
            <div id="callInfo" class="text-sm text-gray-500">
              Continuous conversation active
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Audio Elements -->
    <audio id="audioPlayer" preload="none"></audio>

    <!-- Loading Overlay -->
    <div
      id="loadingOverlay"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
      style="display: none"
    >
      <div class="bg-white rounded-2xl p-8 text-center shadow-2xl">
        <div
          class="w-16 h-16 bg-gradient-to-r from-primary-500 to-primary-600 rounded-full flex items-center justify-center mx-auto mb-4"
        >
          <i class="fas fa-robot text-white text-2xl animate-spin"></i>
        </div>
        <p class="text-gray-700 text-lg font-medium">Zevo AI is thinking...</p>
      </div>
    </div>

    <!-- Error Modal -->
    <div
      id="errorModal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
      style="display: none"
    >
      <div class="bg-white rounded-2xl max-w-md w-full mx-4 shadow-2xl">
        <div
          class="flex items-center justify-between p-6 border-b border-gray-200"
        >
          <h3 class="text-lg font-semibold text-gray-900">Error</h3>
          <button
            id="closeErrorModal"
            class="text-gray-400 hover:text-gray-600 transition-colors"
          >
            <i class="fas fa-times text-lg"></i>
          </button>
        </div>
        <div class="p-6">
          <p id="errorMessage" class="text-gray-700"></p>
        </div>
        <div class="flex justify-end p-6 pt-0">
          <button
            id="retryBtn"
            class="px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors"
          >
            Retry
          </button>
        </div>
      </div>
    </div>

    <script src="main.js"></script>
  </body>
</html>
